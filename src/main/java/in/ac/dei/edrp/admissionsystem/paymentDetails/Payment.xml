<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE sqlMap
PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
"http://www.ibatis.com/dtd/sql-map-2.dtd">


<sqlMap namespace="payment">

<update  id="updateStatusWithDocumentPath">
update student_application_status as sas
join system_values as sv on sv.university_id=sas.university_id and
STR_TO_DATE(substr(sv.value, 1, 8), '%Y%m%d')=sas.session_start_date and
STR_TO_DATE(substr(sv.value, 9, 8), '%Y%m%d')=sas.session_end_date and sv.code='ADMSSN'
set sas.application_status=#applicationStatus# , sas.application_document_path=#documentPath#
where sas.application_number=#applicationNumber# and sas.email_id=#email# and sas.university_id=sv.university_id;
</update>

<select id="getRecordExist" resultClass="in.ac.dei.edrp.admissionsystem.paymentDetails.PaymentDocumentBean">
select application_number applicationNumber from voucher_generation_details where application_number=#applicationNumber# and date_of_birth=#dob#
</select>

<insert id="insertVoucherRecord">
insert into voucher_generation_details
(application_number,date_of_birth,applicant_name,applied_programs,fee,insert_time)
values 
(#applicationNumber#,#dob#,#firstName#,#programName#,#fee#,now());
</insert>

</sqlMap>